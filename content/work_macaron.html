<div id="content" class="content_work_category macaron">

	<div class="wrapper">
		<!-- title box -->
		<div class="entryBox first">
			<div class="textWrap">
				<p class="title font_color_light">馬卡龍</p>
				<p class="text font_color_light">
					馬卡龍禮盒正式開賣!!!<br/>
					即日起至2013結束以前，替<a href="https://www.facebook.com/lavieenvanille" target="_blank">香草生活粉絲專頁</a>按讚的朋友們均可享85折優惠唷!!宅配單筆滿3000元另可享免運優惠!!!!
				</p>
			</div>
		</div>

		<!-- insert canvas items(javascript) -->
		<div class="insertItemCanvas"></div>

		<!-- link to index -->
		<div id="link_content_work_macaron_last" class="entryBox last">
			<p class="last font_color_light">回目錄</p>
		</div>
	</div>


	<!-- lightbox for click items -->
	<div class="lightboxBackground" >
	</div>
	<div class="lightbox">
		<div class="lightboxWrapper">
			<img src="./images/work/macaron/macaron_12.jpg" style="width:35rem" alt="馬卡龍">
			<img src="./images/ico_cross.png" alt="ico_cross" style="width:2rem" class="ico_cross">
			<p>
				最近剛好都走棒棒糖路線!<br/>
				這是幫好友精心設計的婚禮小點~<br/>
				無論口味or配色 自已都很喜歡，<br/>
				殊不知..放個包包回來...就被拿光光了!! <br/>
				都還來不及好好拍張照呢!! <br/>
			</p>
		</div>
	</div>


	<!-- 
	javascript for
		1. cropped images
		2. link to page of index
		3. hover animation
	-->
	<script>
		/* insert macaronCanvas items */
		var numberCanvasMacaron = 13;
		var ID_canvasMacaron = function(Xindex){
			return "canvas_content_work_macaron_" + Xindex ;
		};
		for(var i = 1; i <= numberCanvasMacaron; i++) {
			$('.insertItemCanvas').append('<canvas id="' + ID_canvasMacaron(i) + '">馬卡龍_'+i+'</canvas>');
		};

		/* define CanvasSize equal to the size of last entryBox (unit: px) */
		var sizeMacaronCanvas = Number();
		$(document).ready(function(){
			sizeMacaronCanvas = +$('#content .content_work_category .entryBox.last').css("height").toLocaleLowerCase().replace("px", "");
		});

		/* declare array of objects for canvas cropping image */
		var objArrayMacaron = new Array();
		for (var i = 1; i <= numberCanvasMacaron; i++) objArrayMacaron.push( new Object() );

		/* setup canvas (ref: http://www.html5canvastutorials.com/tutorials/html5-canvas-image-crop) */
		for (var i = 1; i <= numberCanvasMacaron; i++) {
			objArrayMacaron[i]        = new Image();
			objArrayMacaron[i].index  = i;
			objArrayMacaron[i].onload = function() {
				var tempCanvas = document.getElementById( ID_canvasMacaron(this.index) );
				    tempCanvas.width  = sizeMacaronCanvas;
				    tempCanvas.height = sizeMacaronCanvas;
				/* draw cropped image */
				var reduceRatio  = 2.5;
				var sourceWidth  = this.width  / reduceRatio;
				var sourceHeight = this.height / reduceRatio;
				var sourceX = -(sourceWidth  - tempCanvas.width)/2;
				var sourceY = -(sourceHeight - tempCanvas.height)/2;
				tempCanvas.getContext('2d').drawImage(objArrayMacaron[this.index], sourceX, sourceY, sourceWidth, sourceHeight);
			};
			objArrayMacaron[i].src = './images/work/macaron/macaron_' + i + '.jpg';  //filePosition and fileName
		};

		/* jquery for links and hover animation */
		$(document).ready(function(){
			/* link to index */
			$().clickLinkContent( '#link_content_work_macaron_last', filePosition, 'work' );

			/* lightbox switch for each item */
			for (var i = 1; i <= numberCanvasMacaron; i++) {
				$( '#' + ID_canvasMacaron(i) ).click(function(){
					$('.lightboxBackground, .lightbox').fadeIn(150);
				});
			};
			$('.lightboxBackground').click(function(){
				$('.lightboxBackground, .lightbox').fadeOut(150);
			});

			/* hover animation */
			$("#content.content_work_category.macaron canvas").hover(function(){
				$(this).stop;
				$(this).animate({"border-radius":"2.125rem" },{duration:100,queue:false});
				return false;
			}, function(){
				$(this).animate({"border-radius":"0.5rem"},{duration:100,queue:false});
				return false;
			});
			$("#content.content_work_category.macaron .entryBox.last").hover(function(){
				$(this).stop;
				$(this).animate({
					"border-top-left-radius"   :"2.125rem",
					"border-bottom-left-radius":"2.125rem" 
				},{duration:100,queue:false});
				return false;
			}, function(){
				$(this).animate({
					"border-top-left-radius"   :"0.5rem",
					"border-bottom-left-radius":"0.5rem" 
				},{duration:100,queue:false});
				return false;
			});
		});
	</script>
	
</div>